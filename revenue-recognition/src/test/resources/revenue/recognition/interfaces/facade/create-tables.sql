DROP TABLE revenueRecognitions IF EXISTS;
DROP TABLE contracts IF EXISTS;
DROP TABLE products IF EXISTS;

CREATE TABLE products (
	id BIGINT generated by default as identity (start with 1),
	name VARCHAR(255),
	type VARCHAR(255),
	PRIMARY KEY (id));
CREATE TABLE contracts (
	id BIGINT generated by default as identity (start with 1),
	product_id BIGINT NOT NULL,
	revenue NUMERIC(10,2),
	dateSigned DATE,
	PRIMARY KEY(id));
CREATE TABLE revenueRecognitions (
	contract_id BIGINT NOT NULL,
	amount NUMERIC(10,2),
	recognizedOn DATE NOT NULL,
	PRIMARY KEY (contract_id, recognizedOn));

ALTER TABLE revenueRecognitions
	ADD CONSTRAINT fk_contract FOREIGN KEY (contract_id) REFERENCES contracts (id);
ALTER TABLE contracts
	ADD CONSTRAINT fk_product FOREIGN KEY (product_id) REFERENCES products (id);
